/* Simple, clean UI */
:root{
  --bg:#0b0f17;
  --muted:#9fb0c6;
  --text:#e8eef7;
  --line:rgba(255,255,255,.08);
  --primary:#4ea1ff;
  --primary2:#2f7ee6;
  --danger:#ff5a6a;
  --focus-border: rgba(78,161,255,.5);
  --focus-shadow: rgba(78,161,255,.12);
  --btn-hover-border: rgba(255,255,255,.18);
  --bg-grad-1: rgba(78,161,255,.12);
  --bg-grad-2: rgba(255,90,106,.10);
  --card-grad-1: rgba(255,255,255,.04);
  --card-grad-2: rgba(255,255,255,.02);
  --field-bg: rgba(0,0,0,.25);
  --btn-bg: rgba(255,255,255,.04);
  --table-head-bg: rgba(12,18,30,.95);
  --tfoot-bg: rgba(255,255,255,.02);
  --item-bg: rgba(0,0,0,.18);
  --preview-bg: rgba(0,0,0,.18);
  --shadow: 0 10px 30px rgba(0,0,0,.28);
  --danger-bg: rgba(255,90,106,.10);
  --danger-border: rgba(255,90,106,.30);
  --danger-text: #ffd5da;
}

html[data-theme="light"]{
  --bg:#f4f8ff;
  --muted:#4b6a94;
  --text:#0b1b33;
  --line:rgba(12,40,80,.16);
  --primary:#2563eb;
  --primary2:#1d4ed8;
  --danger:#dc2626;
  --focus-border: rgba(37,99,235,.45);
  --focus-shadow: rgba(37,99,235,.16);
  --btn-hover-border: rgba(12,40,80,.22);
  --bg-grad-1: rgba(37,99,235,.14);
  --bg-grad-2: rgba(14,165,233,.12);
  --card-grad-1: rgba(255,255,255,1);
  --card-grad-2: rgba(244,248,255,1);
  --field-bg: rgba(255,255,255,.92);
  --btn-bg: rgba(37,99,235,.06);
  --table-head-bg: rgba(37,99,235,.08);
  --tfoot-bg: rgba(37,99,235,.04);
  --item-bg: rgba(37,99,235,.04);
  --preview-bg: rgba(37,99,235,.04);
  --shadow: 0 10px 30px rgba(11,27,51,.10);
  --danger-bg: rgba(220,38,38,.08);
  --danger-border: rgba(220,38,38,.22);
  --danger-text: #7f1d1d;
}

html{color-scheme: dark}
html[data-theme="light"]{color-scheme: light}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: radial-gradient(1200px 700px at 20% 0%, var(--bg-grad-1), transparent 60%),
              radial-gradient(900px 600px at 90% 10%, var(--bg-grad-2), transparent 55%),
              var(--bg);
  color:var(--text);
}

.container{max-width:1100px;margin:0 auto;padding:18px}
h1{margin:8px 0 6px;font-size:28px}
h2{margin:16px 0 10px;font-size:18px}
p{margin:8px 0}
.muted{color:var(--muted)}
.small{font-size:12px}
.header-title{display:flex;align-items:center;gap:12px}
.header-top{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.header-logo{height:100px;width:auto;display:block}
.grid{display:grid;grid-template-columns: 1.3fr .9fr;gap:16px}
@media (max-width: 900px){ .grid{grid-template-columns:1fr} }

.theme-toggle{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  border-radius:999px;
}
.theme-toggle-label{font-size:13px}
.theme-toggle-switch{
  width:42px;
  height:24px;
  border-radius:999px;
  position:relative;
  background: var(--btn-bg);
  border:1px solid var(--line);
}
.theme-toggle-thumb{
  width:18px;
  height:18px;
  border-radius:999px;
  position:absolute;
  top:50%;
  left:3px;
  transform: translateY(-50%);
  background: linear-gradient(180deg, var(--primary), var(--primary2));
  box-shadow: 0 8px 18px rgba(0,0,0,.18);
  transition: left 140ms ease;
}
html[data-theme="light"] .theme-toggle-thumb{box-shadow: 0 8px 18px rgba(11,27,51,.12)}
.theme-toggle:focus-visible{outline:none; box-shadow: 0 0 0 3px var(--focus-shadow); border-color: var(--focus-border)}

html[data-theme="light"] .theme-toggle-switch{background: var(--btn-bg)}

html[data-theme="light"] #themeToggle[aria-checked="true"] .theme-toggle-thumb{left:21px}
html:not([data-theme="light"]) #themeToggle[aria-checked="true"] .theme-toggle-thumb{left:21px}

.card{
  background: linear-gradient(180deg, var(--card-grad-1), var(--card-grad-2));
  border:1px solid var(--line);
  border-radius:14px;
  padding:16px;
  box-shadow: var(--shadow);
}

.form-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
}
@media (max-width: 520px){ .form-grid{grid-template-columns:1fr} }

label{display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--muted)}
input, select{
  background: var(--field-bg);
  border:1px solid var(--line);
  color:var(--text);
  border-radius:10px;
  padding:10px 10px;
  outline:none;
}
input:focus, select:focus{border-color: var(--focus-border); box-shadow: 0 0 0 3px var(--focus-shadow);}

.row{display:flex;gap:10px;align-items:center;margin-top:10px;flex-wrap:wrap}
 label.row{flex-direction:row}

 #renonceIndemnites{
  width:20px;
  height:20px;
  transform: scale(1.15);
  transform-origin: left center;
  accent-color: var(--danger);
 }
 #renonceIndemnites + span{
  color: var(--danger);
  font-weight:700;
 }
.btn{
  border:1px solid var(--line);
  background: var(--btn-bg);
  color:var(--text);
  padding:10px 12px;
  border-radius:12px;
  cursor:pointer;
  font-weight:600;
}
.btn:hover{border-color: var(--btn-hover-border)}
.btn-primary{
  background: linear-gradient(180deg, var(--primary), var(--primary2));
  border-color: rgba(0,0,0,.2);
}
.btn-ghost{background:transparent}
.btn-danger{
  background: var(--danger-bg);
  border-color: var(--danger-border);
  color: var(--danger-text);
}

.table-wrap{overflow:auto;border:1px solid var(--line);border-radius:12px}
table{width:100%;border-collapse:collapse;min-width:820px}
th,td{border-bottom:1px solid var(--line);padding:10px 10px;font-size:13px}
th{position:sticky;top:0;background: var(--table-head-bg);text-align:left}
td.right{text-align:right}
td.num, th.num{text-align:right; font-variant-numeric: tabular-nums;}
tfoot td{background: var(--tfoot-bg)}
.hint{margin-top:10px;color:var(--muted);font-size:12px}

.total-mobile{display:none}

@media (max-width: 900px){
  .table-wrap{overflow:visible;border:0}
  #fraisTable{min-width:0;width:100%}
  #fraisTable thead,
  #fraisTable tfoot{display:none}
  #fraisTable,
  #fraisTable tbody,
  #fraisTable tr,
  #fraisTable td{display:block}
  #fraisTable tr{
    border:1px solid var(--line);
    border-radius:14px;
    padding:10px;
    background: linear-gradient(180deg, var(--card-grad-1), var(--card-grad-2));
    box-shadow: var(--shadow);
    margin:10px 0;
  }
  #fraisTable td{
    border-bottom:0;
    padding:8px 0;
    text-align:left !important;
  }
  #fraisTable td::before{
    content: attr(data-label);
    display:block;
    font-size:12px;
    color:var(--muted);
    margin-bottom:6px;
  }
  #fraisTable td.cell-actions{padding-top:10px}
  #fraisTable td.cell-actions::before{display:none}
  #fraisTable td.cell-actions .btn{width:100%}

  #fraisTable input,
  #fraisTable select{width:100%; text-align:left !important}

  #fraisTable tr.is-nondep td.cell-km{display:none}

  .total-mobile{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-top:10px;
    padding:12px 12px;
    border:1px solid var(--line);
    border-radius:12px;
    background: var(--tfoot-bg);
  }
  .total-mobile strong{font-size:18px; font-variant-numeric: tabular-nums;}
}

 #fraisTable{table-layout:fixed}
 #fraisTable th,
 #fraisTable td{text-align:center; vertical-align:middle}
 #fraisTable td.num,
 #fraisTable th.num{text-align:center}
 #fraisTable th:nth-child(1),
 #fraisTable td:nth-child(1){width:140px}
 #fraisTable th:nth-child(3),
 #fraisTable td:nth-child(3){width:90px}
 #fraisTable th:nth-child(4),
 #fraisTable td:nth-child(4){width:120px}
 #fraisTable th:nth-child(5),
 #fraisTable td:nth-child(5){width:220px}
 #fraisTable th:nth-child(6),
 #fraisTable td:nth-child(6){width:80px}

 #fraisTable input,
 #fraisTable select{width:100%; text-align:center}
 #fraisTable input[type="file"]{width:100%}
 #fraisTable input.km,
 #fraisTable input.amt{padding-left:8px;padding-right:8px}

.list{margin-top:10px;display:flex;flex-direction:column;gap:10px}
.item{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  border:1px solid var(--line); border-radius:12px;
  padding:10px;background: var(--item-bg)
}
.item .meta{display:flex;flex-direction:column;gap:2px}
.item .meta .name{font-weight:700}
.item .meta .sub{color:var(--muted);font-size:12px}
.item .actions{display:flex;gap:8px;align-items:center}
.badge{font-size:12px;color:var(--muted);border:1px solid var(--line);border-radius:999px;padding:3px 8px}
hr{border:none;border-top:1px solid var(--line);margin:14px 0}

.status{margin-top:10px;min-height:18px;color:var(--muted);font-size:13px}
.footer{padding-top:0;padding-bottom:24px}

 .footer-link{color: var(--text); text-decoration: underline; text-underline-offset: 3px}
 .footer-link:hover{opacity:.9}

 .legal{margin-top:14px}
 .legal h3{margin:14px 0 6px;font-size:14px}

 .preview{margin-top:12px;border:1px solid var(--line);border-radius:12px;overflow:hidden;background: var(--preview-bg)}
 .preview-frame{width:100%;height:620px;border:0;display:block;background:#fff}
